define("qtype_aitext/submission",["exports","core/loadingicon"],(function(_exports,_loadingicon){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=()=>{const questionContainer=document.querySelector(".que.aitext");if(!questionContainer)return;const submitButton=questionContainer.querySelector('button[id^="q"][id$="-submit"]'),form=questionContainer.closest("form");submitButton&&form&&submitButton.addEventListener("click",(function(e){const spinnerContainer=document.createElement("div");spinnerContainer.className="aitext-spinner-overlay",spinnerContainer.style.position="relative",spinnerContainer.style.display="inline-block",submitButton.parentNode.insertBefore(spinnerContainer,submitButton),spinnerContainer.appendChild(submitButton);const spinnerInner=document.createElement("div");spinnerInner.className="qtype_aitext_spinnerInner",spinnerContainer.appendChild(spinnerInner),(0,_loadingicon.addIconToContainer)(spinnerInner).then((()=>(submitButton.disabled=!0,submitButton.style.opacity="0.7",spinnerContainer.dataset.spinnerActive="true",!0))).catch((()=>{spinnerContainer.parentNode.insertBefore(submitButton,spinnerContainer),spinnerContainer.remove()})),e.preventDefault();const buttonName=submitButton.getAttribute("name"),buttonValue=submitButton.getAttribute("value");if(buttonName){const input=document.createElement("input");input.type="hidden",input.name=buttonName,input.value=buttonValue||"",form.appendChild(input)}setTimeout((function(){form.submit()}),100)}))}}));

//# sourceMappingURL=submission.min.js.map