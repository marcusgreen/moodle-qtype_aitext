define("qtype_aitext/transcriptmanager",["jquery","core/log","qtype_aitext/audiorecorder"],(function($,log,audiorecorder){return log.debug("qtype_aitext transcriptmanager: initialising"),{audiorec:null,clone:function(){return $.extend(!0,{},this)},init:function(opts){this.register_events(opts),this.init_components(opts)},register_events:function(opts){$(".retry_"+opts.uniqueid).on("click",(function(){$(".qtype_aitext_audiorecorder_"+opts.uniqueid).removeClass("hidden"),$(".qtype_aitext_audiosummary_"+opts.uniqueid).addClass("hidden")}))},init_components:function(opts){var app=this;opts.callback=function(message){switch(message.type){case"recording":break;case"interimspeech":var wordcount=app.count_words(message.capturedspeech);$("."+opts.uniqueid+"_currentwordcount").text(wordcount);break;case"speech":log.debug("speech at multiaudio");var speechtext=message.capturedspeech;log.debug("speechtext:",speechtext),$("."+opts.uniqueid).val(speechtext);wordcount=app.count_words(message.capturedspeech);$("."+opts.uniqueid+"_currentwordcount").text(wordcount),$(".qtype_aitext_audiorecorder_"+opts.uniqueid).addClass("hidden"),$(".qtype_aitext_audiosummary_"+opts.uniqueid).removeClass("hidden")}},opts.stt_guided=!1,app.audiorec=audiorecorder.clone(),app.audiorec.init(opts)},count_words:function(transcript){return transcript.trim().split(/\s+/).filter((function(word){return word.length>0})).length}}}));

//# sourceMappingURL=transcriptmanager.min.js.map